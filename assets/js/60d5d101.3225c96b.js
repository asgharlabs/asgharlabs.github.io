"use strict";(self.webpackChunkasgharlabs_github_io=self.webpackChunkasgharlabs_github_io||[]).push([[6156],{1846:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"vcenter-packer-ansible-inspec/README","title":"vCenter packer ansible inspec","description":"Scope","source":"@site/docs/vcenter-packer-ansible-inspec/README.md","sourceDirName":"vcenter-packer-ansible-inspec","slug":"/vcenter-packer-ansible-inspec/","permalink":"/docs/vcenter-packer-ansible-inspec/","draft":false,"unlisted":false,"editUrl":"https://github.com/asgharlabs/asgharlabs.github.io/tree/main/packages/create-docusaurus/templates/shared/docs/vcenter-packer-ansible-inspec/README.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Github-Terraform","permalink":"/docs/github-terraform/"}}');var r=i(4848),l=i(8453);const t={},c="vCenter packer ansible inspec",a={},o=[{value:"Scope",id:"scope",level:2},{value:"Process",id:"process",level:2},{value:"Usage",id:"usage",level:2},{value:"Pre-Reqs",id:"pre-reqs",level:3},{value:"Running the pipeline",id:"running-the-pipeline",level:3},{value:"Presentation/Script",id:"presentationscript",level:3},{value:"License &amp; Authors",id:"license--authors",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsxs)(n.h1,{id:"vcenter-packer-ansible-inspec",children:["vCenter ",(0,r.jsx)(n.code,{children:"packer"})," ",(0,r.jsx)(n.code,{children:"ansible"})," ",(0,r.jsx)(n.code,{children:"inspec"})]})}),"\n",(0,r.jsx)(n.h2,{id:"scope",children:"Scope"}),"\n",(0,r.jsxs)(n.p,{children:["This repo is the core example pipeline bringing vCenter, ",(0,r.jsx)(n.code,{children:"packer"}),",\n",(0,r.jsx)(n.code,{children:"ansible"})," and ",(0,r.jsx)(n.code,{children:"inspec"})," together."]}),"\n",(0,r.jsx)(n.h2,{id:"process",children:"Process"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Prepare your Jenkins instance. You'll need ",(0,r.jsx)(n.code,{children:"docker"}),", ",(0,r.jsx)(n.code,{children:"git"}),", ",(0,r.jsx)(n.code,{children:"sudo"})," access for at least the ",(0,r.jsx)(n.code,{children:"jenkins"})," user."]}),"\n",(0,r.jsxs)(n.li,{children:["Make sure your ",(0,r.jsx)(n.code,{children:"variables.json"})," has at least ",(0,r.jsx)(n.code,{children:"master"})," set up correctly. Run through the pipeline at least once, with ",(0,r.jsx)(n.code,{children:"nginx"})," only commented in the ",(0,r.jsx)(n.code,{children:"playbook.yml"})]}),"\n",(0,r.jsxs)(n.li,{children:["Have your ",(0,r.jsx)(n.code,{children:"debian10-template"})," or the like set up with ",(0,r.jsx)(n.code,{children:"sudo"})," for your login, and ",(0,r.jsx)(n.code,{children:"open-vm-tools"})," already installed on the template."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.h3,{id:"pre-reqs",children:"Pre-Reqs"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ansible"})," installed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"packer"})," installed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"packer-builder-vphere"})," installed from ",(0,r.jsx)(n.a,{href:"https://github.com/jetbrains-infra/packer-builder-vsphere",children:"here"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"running-the-pipeline",children:"Running the pipeline"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Clone this repository and make any changes to the ",(0,r.jsx)(n.a,{href:"./Jenkinsfile",children:"Jenkinsfile"})]}),"\n",(0,r.jsx)(n.li,{children:"Take the Jenkinsfile import it into your jenkins instance."}),"\n",(0,r.jsxs)(n.li,{children:["Edit the following from the ",(0,r.jsx)(n.a,{href:"./debian10/variables.json",children:"variables.json"})," example"]}),"\n",(0,r.jsx)(n.li,{children:"Run the pipeline with changes you may want."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"presentationscript",children:"Presentation/Script"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Clone the ",(0,r.jsx)(n.code,{children:"debian10-template"})," to ",(0,r.jsx)(n.code,{children:"debian-gold"}),' to start with a "blank slate."']}),"\n",(0,r.jsxs)(n.li,{children:["Run the pipeline with master first. ",(0,r.jsx)(n.code,{children:"origin/master"})," as a parameter."]}),"\n",(0,r.jsxs)(n.li,{children:["You should show off you having the 2 templates now, ",(0,r.jsx)(n.code,{children:"debian-working"})," and ",(0,r.jsx)(n.code,{children:"debian-gold-$DATE"})]}),"\n",(0,r.jsxs)(n.li,{children:["Rename ",(0,r.jsx)(n.code,{children:"debian-gold-$DATE"})," to ",(0,r.jsx)(n.code,{children:"debian-gold"}),", and delete ",(0,r.jsx)(n.code,{children:"debian-working"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Create a PR with with the first part of the ",(0,r.jsx)(n.a,{href:"debian10/playbook.yml",children:"playbook.yml"})," uncommented."]}),"\n",(0,r.jsxs)(n.li,{children:["Update with the second part of the playbook, the ",(0,r.jsx)(n.code,{children:"ssh-key"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Update with the third part of the playbook for the ",(0,r.jsx)(n.code,{children:"bad-actor"}),", show off the InSpec failure."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"license--authors",children:"License & Authors"}),"\n",(0,r.jsxs)(n.p,{children:["If you would like to see the detailed LICENCE click ",(0,r.jsx)(n.a,{href:"./LICENCE",children:"here"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Author: JJ Asghar"}),"\n",(0,r.jsx)(n.li,{children:"Author: Will Plusnick"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:'Copyright:: 2019- IBM, Inc\n\nLicensed under the Apache License, Version 2.0 (the "License");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var s=i(6540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);